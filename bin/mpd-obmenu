#!/usr/bin/env python

import mpd
from cgi import escape

m = mpd.MPDClient()
m.connect('localhost', 6600)

print '<openbox_pipe_menu>'

for item in m.playlistinfo():
  print '<item label="%s"><action name="Execute"><command>mpc play %s</command></action></item>' % (escape("%s - %s" % (item['artist'], item['title'])), int(item['id']) + 1)

print '</openbox_pipe_menu>'
